# AI 驱动的量化交易机器人

这是一个基于大语言模型（LLM）分析市场数据并执行交易决策的自动化加密货币量化交易机器人。该策略结合了技术指标、市场情绪分析和智能仓位管理，旨在实现 BTC/USDT 永续合约的自动化交易。

## 免责声明

**#### 个人喜欢玩黑箱文化，你们不一样，别上头。**

本策略仅为实验和研究目的，不构成任何投资建议。加密货币市场波动巨大，具有高风险。在使用本策略之前，请务C分了解相关风险，并自行承担所有交易结果。

## 核心功能

- **多源数据分析**：综合K线数据、多种技术指标（MACD, RSI, 布林带等）和市场情绪指标进行分析。
- **AI 决策**：利用大型语言模型（如阿里云百炼）的强大分析能力，生成交易信号（买入/卖出/持有）。
- **智能仓位管理**：根据AI信号的置信度、市场趋势强度和RSI指标动态计算仓位大小。
- **自动化交易执行**：通过 `ccxt` 库连接 OKX 交易所，自动执行开仓、平仓、加仓、减仓等操作。
- **风险控制**：包含测试模式，可在不产生实际交易的情况下验证策略逻辑。
- **健壮性设计**：具备重试机制和备用信号生成逻辑，以应对API请求失败等异常情况。

## 技术栈

- **交易平台**：OKX
- **数据与执行**：`ccxt`
- **AI 模型**：阿里云百炼（或其他兼容 OpenAI API 的大语言模型）
- **数据处理**：`pandas`
- **任务调度**：`schedule`
- **环境变量管理**：`python-dotenv`

## 设置指南

### 1. 克隆或下载项目

将项目文件下载到您的本地计算机。

### 2. 安装依赖

在项目根目录下，运行以下命令安装所有必需的 Python 库：

```bash
pip install -r requirements.txt
```

### 3. 配置环境变量

在项目根目录下，创建一个名为 `.env` 的文件。您可以复制 `.env.example` 文件并重命名为 `.env`。

```bash
cp .env.example .env
```

然后，编辑 `.env` 文件并填入以下信息：

- `OKX_API_KEY`: 您的 OKX API Key。
- `OKX_API_SECRET`: 您的 OKX API Secret。
- `OKX_API_PASSWORD`: 您的 OKX API 密码（Passphrase）。
- `DASHSCOPE_API_KEY`: 您的阿里云百炼 API Key。

**请务必妥善保管您的 API 密钥，不要泄露给任何人。**

### 4. 检查交易配置

在 `deepseek_ok_带市场情绪+指标版本.py` 文件中，您可以根据自己的需求调整 `TRADE_CONFIG` 字典中的参数，例如：

- `symbol`: 交易对（默认为 `BTC/USDT`）。
- `leverage`: 杠杆倍数（默认为 `10`）。
- `timeframe`: K线周期（默认为 `15m`）。
- `max_positions`: 最大持仓金额（USDT）。
- `test_mode`: 是否开启测试模式（`True` 或 `False`）。

## 运行策略

完成以上所有配置后，在项目根目录下运行以下命令启动交易机器人：

```bash
python deepseek_ok_带市场情绪+指标版本.py
```

机器人将开始按预设的时间间隔（默认为15分钟）获取数据、进行分析并执行交易。所有操作和分析结果都将打印在控制台中。

## 文件结构

```
.
├── deepseek_ok_带市场情绪+指标版本.py  # 主策略文件
├── requirements.txt                   # Python 依赖库
├── README.md                          # 项目说明文件
└── .env.example                       # 环境变量示例文件
```